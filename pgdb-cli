#!/usr/bin/env python

import pandas as pd

import database

neo4j_graph = database.connect_neo4j()

def read_until_EOF():
    lines = list()
    while True:
        try:
            line = input(". " if lines else "> ")
        except EOFError:
            print("\r ")
            break
        if line.strip() == "":
            continue
        lines.append(line)
    return "\n".join(lines)

def main():
    nodes = pd.DataFrame(columns=["id", "external_id", "name", "description", "species_id"])
    edges = pd.DataFrame(columns=["source", "target", "score"])
    while True:
        query = read_until_EOF()
        cursor = neo4j_graph.run(query)
        for row in cursor:
            source = row["source"]
            nodes.loc[source["id"]] = source
        print(nodes)

if __name__ == "__main__":
    try:
        main()
        print("\r ")
    except KeyboardInterrupt:
        pass
